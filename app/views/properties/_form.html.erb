<%= form_for @property, html: { data: { ajax: true }, class: 'form-horizontal' } do |f| %>
  <fieldset>
    <div class="control-group <%= form_helper.error_class(:title, @property) %>">
      <%= f.label :title, 'Title', class: 'control-label' %>
      <div class="controls">
        <%= f.text_field :title, class: 'input-xlarge' %>
        <%= form_helper.error_message(:title, @property) %>
      </div>
    </div>
    <div class="control-group <%= form_helper.error_class(:description, @property) %>">
      <%= f.label :description, 'Description', class: 'control-label' %>
      <div class="controls">
        <%= f.text_area :description, class: 'input-xlarge', rows: 8 %>
        <%= form_helper.error_message(:description, @property) %>
      </div>
    </div>
  </fieldset>
  <fieldset>
    <legend>Address</legend>
    <%= f.fields_for @property.address do |address_form| %>
      <% address = @property.address %>
      <div class="control-group <%= form_helper.error_class(:address, address) %>">
        <%= address_form.label :address, 'Address', class: 'control-label' %>
        <div class="controls">
          <%= address_form.text_field :address, class: 'input-xlarge' %>
          <%= form_helper.error_message(:address, address) %>
        </div>
      </div>
      <div class="control-group <%= form_helper.error_class(:address2, address) %>">
        <div class="controls">
          <%= address_form.text_field :address2, class: 'input-xlarge' %>
          <%= form_helper.error_message(:address2, address) %>
        </div>
      </div>
      <div class="control-group <%= form_helper.error_class(:state, address) %>">
        <%= address_form.label :state, 'State', class: 'control-label' %>
        <div class="controls">
          <%= address_form.text_field :state, class: 'input-xlarge' %>
          <%= form_helper.error_message(:state, address) %>
        </div>
      </div>
      <div class="control-group <%= form_helper.error_class(:city, address) %>">
        <%= address_form.label :city, 'City', class: 'control-label' %>
        <div class="controls">
          <%= address_form.text_field :city, class: 'input-xlarge' %>
          <%= form_helper.error_message(:city, address) %>
        </div>
      </div>
      <div class="control-group <%= form_helper.error_class(:country, address) %>">
        <%= address_form.label :country, 'Country', class: 'control-label' %>
        <div class="controls">
          <%= address_form.text_field :country, class: 'input-xlarge' %>
          <%= form_helper.error_message(:country, address) %>
        </div>
      </div>
      <div class="control-group <%= form_helper.error_class(:post_code, address) %>">
        <%= address_form.label :post_code, 'Post code', class: 'control-label' %>
        <div class="controls">
          <%= address_form.text_field :post_code, class: 'input-xlarge' %>
          <%= form_helper.error_message(:post_code, address) %>
        </div>
      </div>
    <% end %>
  </fieldset>
  <div class="form-actions">
    <%= f.submit 'Save changes', class: 'btn btn-primary' %>
    <%= link_to 'Back', @property.new_record? ? properties_path : property_path(@property), data: { ajax: true}, class: 'btn' %>
  </div>
<% end %>

