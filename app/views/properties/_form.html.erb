<%= form_for @property, html: { data: { ajax: true }, class: 'form-horizontal' } do |f| %>
  <fieldset>
    <div class="control-group <%= 'error' if @property.has_error?(:title) %>">
      <%= f.label :title, 'Title', class: 'control-label' %>
      <div class="controls">
        <%= f.text_field :title, class: 'input-xlarge' %>
        <%= @property.error_message(:title) %>
      </div>
    </div>
    <div class="control-group <%= 'error' if @property.has_error?(:description) %>">
      <%= f.label :description, 'Description', class: 'control-label' %>
      <div class="controls">
        <%= f.text_area :description, class: 'input-xlarge', rows: 8 %>
        <%= @property.error_message(:description) %>
      </div>
    </div>
  </fieldset>
  <fieldset>
    <legend>Address</legend>
    <%= f.fields_for @property.address do |address_form| %>
      <% address = @property.address %>
      <div class="control-group <%= 'error' if address.has_error?(:address) %>">
        <%= address_form.label :address, 'Address', class: 'control-label' %>
        <div class="controls">
          <%= address_form.text_field :address, class: 'input-xlarge' %>
          <%= address.error_message(:address) %>
        </div>
      </div>
      <div class="control-group <%= 'error' if address.has_error?(:address2) %>">
        <div class="controls">
          <%= address_form.text_field :address2, class: 'input-xlarge' %>
          <%= address.error_message(:address2) %>
        </div>
      </div>
      <div class="control-group <%= 'error' if address.has_error?(:state) %>">
        <%= address_form.label :state, 'State', class: 'control-label' %>
        <div class="controls">
          <%= address_form.text_field :state, class: 'input-xlarge' %>
          <%= address.error_message(:state) %>
        </div>
      </div>
      <div class="control-group <%= 'error' if address.has_error?(:city) %>">
        <%= address_form.label :city, 'City', class: 'control-label' %>
        <div class="controls">
          <%= address_form.text_field :city, class: 'input-xlarge' %>
          <%= address.error_message(:city) %>
        </div>
      </div>
      <div class="control-group <%= 'error' if address.has_error?(:country) %>">
        <%= address_form.label :country, 'Country', class: 'control-label' %>
        <div class="controls">
          <%= address_form.text_field :country, class: 'input-xlarge' %>
          <%= address.error_message(:country) %>
        </div>
      </div>
      <div class="control-group <%= 'error' if address.has_error?(:post_code) %>">
        <%= address_form.label :post_code, 'Post code', class: 'control-label' %>
        <div class="controls">
          <%= address_form.text_field :post_code, class: 'input-xlarge' %>
          <%= address.error_message(:post_code) %>
        </div>
      </div>
    <% end %>
  </fieldset>
  <div class="form-actions">
    <%= f.submit 'Save changes', class: 'btn btn-primary' %>
    <%= link_to 'Back', @property.new_record? ? properties_path : property_path(@property), data: { ajax: true}, class: 'btn' %>
  </div>
<% end %>

